import{w,a as x,s as g,o as s}from"./chunk-QMGIS6GS-u2wsVBQ8.js";import{A as h}from"./AuthFooter-CKhZqaSr.js";import{C as P,a as b,b as j}from"./card-B9a7pVUc.js";import{u as S,a as C,E,b as R}from"./zod-CESMKTJV.js";import{F as m}from"./FormInput-DWnxTtgF.js";import{M as y}from"./MessageAlert-B1YPt43R.js";import{u as F}from"./AuthContext-DymqdCtb.js";import"./button-p6101m2e.js";import"./utils-CBfrqCZ4.js";import"./createLucideIcon-BaT0F7pg.js";import"./index-CcF3o-s6.js";import"./auth-DssmCHyn.js";const V=()=>[{title:"Redefinir senha - NaMesaJÃ¡"}],B=w(function(){const{resetPassword:d}=F(),[l,o]=x.useState(""),[c]=g(),u=c.get("user-guid"),{register:a,handleSubmit:f,formState:{errors:r,isSubmitting:t},setError:n}=S({resolver:C(R),defaultValues:{newPassword:"",confirmPassword:""}}),p=async i=>{try{const e=await d({userGuid:u??"",newPassword:i.newPassword,confirmPassword:i.confirmPassword});if(!e.status){o(""),n("root",{type:"manual",message:e.message});return}o(e.message)}catch(e){console.error("Reset password error:",e),n("root",{type:"manual",message:e instanceof Error?e.message:"Erro ao redefinir senha."})}};return s.jsxs(s.Fragment,{children:[s.jsx(P,{children:s.jsx(b,{className:"text-center text-4xl",children:"Redefinir senha"})}),s.jsx(j,{className:"flex flex-col gap-6",children:s.jsxs("form",{onSubmit:f(p),className:"flex flex-col gap-6",children:[s.jsx(m,{label:"Nova senha *",type:"password",error:r.newPassword?.message,...a("newPassword")}),s.jsx(m,{label:"Confirmar nova senha *",type:"password",error:r.confirmPassword?.message,...a("confirmPassword")}),s.jsx(E,{error:r.root?.message}),s.jsx(y,{message:l}),s.jsx(h,{question:"Lembrou sua senha?",linkText:"Fazer login",linkTo:"/login",buttonText:t?"Redefinindo...":"Redefinir senha",disabled:t})]})})]})});export{B as default,V as meta};
