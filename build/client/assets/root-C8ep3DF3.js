import{o,w as H,M as B,S as G,p as N,O as W}from"./chunk-QMGIS6GS-u2wsVBQ8.js";import{A as _}from"./AuthContext-DymqdCtb.js";import{R as L,r as J,n as l,a as $,s as U,b as O,t as z,c as V,d as u,i as b,e as j,f as X,S as x,h as K,m as q,M as Y,g as M,j as Z,k as tt,l as et,o as w,p as st,q as A,u as D,Q as it}from"./auth-DssmCHyn.js";var rt=class extends L{#t;#e;#s;#a;#i;#n;#o;constructor(t){super(),this.#o=!1,this.#n=t.defaultOptions,this.setOptions(t.options),this.observers=[],this.#a=t.client,this.#s=this.#a.getQueryCache(),this.queryKey=t.queryKey,this.queryHash=t.queryHash,this.#t=nt(this.options),this.state=t.state??this.#t,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#i?.promise}setOptions(t){this.options={...this.#n,...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#s.remove(this)}setData(t,e){const s=J(this.state.data,t,this.options);return this.#r({data:s,type:"success",dataUpdatedAt:e?.updatedAt,manual:e?.manual}),s}setState(t,e){this.#r({type:"setState",state:t,setStateOptions:e})}cancel(t){const e=this.#i?.promise;return this.#i?.cancel(t),e?e.then(l).catch(l):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#t)}isActive(){return this.observers.some(t=>$(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===U||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>O(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!z(this.state.dataUpdatedAt,t)}onFocus(){this.observers.find(e=>e.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#i?.continue()}onOnline(){this.observers.find(e=>e.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#i?.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),this.#s.notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(e=>e!==t),this.observers.length||(this.#i&&(this.#o?this.#i.cancel({revert:!0}):this.#i.cancelRetry()),this.scheduleGc()),this.#s.notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#r({type:"invalidate"})}fetch(t,e){if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&e?.cancelRefetch)this.cancel({silent:!0});else if(this.#i)return this.#i.continueRetry(),this.#i.promise}if(t&&this.setOptions(t),!this.options.queryFn){const r=this.observers.find(f=>f.options.queryFn);r&&this.setOptions(r.options)}const s=new AbortController,i=r=>{Object.defineProperty(r,"signal",{enumerable:!0,get:()=>(this.#o=!0,s.signal)})},a=()=>{const r=j(this.options,e),y=(()=>{const g={client:this.#a,queryKey:this.queryKey,meta:this.meta};return i(g),g})();return this.#o=!1,this.options.persister?this.options.persister(r,y,this):r(y)},h=(()=>{const r={fetchOptions:e,options:this.options,queryKey:this.queryKey,client:this.#a,state:this.state,fetchFn:a};return i(r),r})();this.options.behavior?.onFetch(h,this),this.#e=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==h.fetchOptions?.meta)&&this.#r({type:"fetch",meta:h.fetchOptions?.meta});const d=r=>{b(r)&&r.silent||this.#r({type:"error",error:r}),b(r)||(this.#s.config.onError?.(r,this),this.#s.config.onSettled?.(this.state.data,r,this)),this.scheduleGc()};return this.#i=V({initialPromise:e?.initialPromise,fn:h.fetchFn,abort:s.abort.bind(s),onSuccess:r=>{if(r===void 0){d(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(r)}catch(f){d(f);return}this.#s.config.onSuccess?.(r,this),this.#s.config.onSettled?.(r,this.state.error,this),this.scheduleGc()},onError:d,onFail:(r,f)=>{this.#r({type:"failed",failureCount:r,error:f})},onPause:()=>{this.#r({type:"pause"})},onContinue:()=>{this.#r({type:"continue"})},retry:h.options.retry,retryDelay:h.options.retryDelay,networkMode:h.options.networkMode,canRun:()=>!0}),this.#i.start()}#r(t){const e=s=>{switch(t.type){case"failed":return{...s,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...at(s.data,this.options),fetchMeta:t.meta??null};case"success":return this.#e=void 0,{...s,data:t.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const i=t.error;return b(i)&&i.revert&&this.#e?{...this.#e,fetchStatus:"idle"}:{...s,error:i,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...t.state}}};this.state=e(this.state),u.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),this.#s.notify({query:this,type:"updated",action:t})})}};function at(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:X(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function nt(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,s=e!==void 0,i=s?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:s?i??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:s?"success":"pending",fetchStatus:"idle"}}var ot=class extends x{constructor(t={}){super(),this.config=t,this.#t=new Map}#t;build(t,e,s){const i=e.queryKey,a=e.queryHash??K(i,e);let n=this.get(a);return n||(n=new rt({client:t,queryKey:i,queryHash:a,options:t.defaultQueryOptions(e),state:s,defaultOptions:t.getQueryDefaults(i)}),this.add(n)),n}add(t){this.#t.has(t.queryHash)||(this.#t.set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const e=this.#t.get(t.queryHash);e&&(t.destroy(),e===t&&this.#t.delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){u.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return this.#t.get(t)}getAll(){return[...this.#t.values()]}find(t){const e={exact:!0,...t};return this.getAll().find(s=>q(e,s))}findAll(t={}){const e=this.getAll();return Object.keys(t).length>0?e.filter(s=>q(t,s)):e}notify(t){u.batch(()=>{this.listeners.forEach(e=>{e(t)})})}onFocus(){u.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){u.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},ut=class extends x{constructor(t={}){super(),this.config=t,this.#t=new Set,this.#e=new Map,this.#s=0}#t;#e;#s;build(t,e,s){const i=new Y({mutationCache:this,mutationId:++this.#s,options:t.defaultMutationOptions(e),state:s});return this.add(i),i}add(t){this.#t.add(t);const e=v(t);if(typeof e=="string"){const s=this.#e.get(e);s?s.push(t):this.#e.set(e,[t])}this.notify({type:"added",mutation:t})}remove(t){if(this.#t.delete(t)){const e=v(t);if(typeof e=="string"){const s=this.#e.get(e);if(s)if(s.length>1){const i=s.indexOf(t);i!==-1&&s.splice(i,1)}else s[0]===t&&this.#e.delete(e)}}this.notify({type:"removed",mutation:t})}canRun(t){const e=v(t);if(typeof e=="string"){const i=this.#e.get(e)?.find(a=>a.state.status==="pending");return!i||i===t}else return!0}runNext(t){const e=v(t);return typeof e=="string"?this.#e.get(e)?.find(i=>i!==t&&i.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){u.batch(()=>{this.#t.forEach(t=>{this.notify({type:"removed",mutation:t})}),this.#t.clear(),this.#e.clear()})}getAll(){return Array.from(this.#t)}find(t){const e={exact:!0,...t};return this.getAll().find(s=>M(e,s))}findAll(t={}){return this.getAll().filter(e=>M(t,e))}notify(t){u.batch(()=>{this.listeners.forEach(e=>{e(t)})})}resumePausedMutations(){const t=this.getAll().filter(e=>e.state.isPaused);return u.batch(()=>Promise.all(t.map(e=>e.continue().catch(l))))}};function v(t){return t.options.scope?.id}function R(t){return{onFetch:(e,s)=>{const i=e.options,a=e.fetchOptions?.meta?.fetchMore?.direction,n=e.state.data?.pages||[],h=e.state.data?.pageParams||[];let d={pages:[],pageParams:[]},r=0;const f=async()=>{let y=!1;const g=c=>{Object.defineProperty(c,"signal",{enumerable:!0,get:()=>(e.signal.aborted?y=!0:e.signal.addEventListener("abort",()=>{y=!0}),e.signal)})},T=j(e.options,e.fetchOptions),P=async(c,p,m)=>{if(y)return Promise.reject();if(p==null&&c.pages.length)return Promise.resolve(c);const I=(()=>{const S={client:e.client,queryKey:e.queryKey,pageParam:p,direction:m?"backward":"forward",meta:e.options.meta};return g(S),S})(),k=await T(I),{maxPages:F}=e.options,Q=m?Z:tt;return{pages:Q(c.pages,k,F),pageParams:Q(c.pageParams,p,F)}};if(a&&n.length){const c=a==="backward",p=c?ht:E,m={pages:n,pageParams:h},C=p(i,m);d=await P(m,C,c)}else{const c=t??n.length;do{const p=r===0?h[0]??i.initialPageParam:E(i,d);if(r>0&&p==null)break;d=await P(d,p),r++}while(r<c)}return d};e.options.persister?e.fetchFn=()=>e.options.persister?.(f,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},s):e.fetchFn=f}}}function E(t,{pages:e,pageParams:s}){const i=e.length-1;return e.length>0?t.getNextPageParam(e[i],e,s[i],s):void 0}function ht(t,{pages:e,pageParams:s}){return e.length>0?t.getPreviousPageParam?.(e[0],e,s[0],s):void 0}var ct=class{#t;#e;#s;#a;#i;#n;#o;#r;constructor(t={}){this.#t=t.queryCache||new ot,this.#e=t.mutationCache||new ut,this.#s=t.defaultOptions||{},this.#a=new Map,this.#i=new Map,this.#n=0}mount(){this.#n++,this.#n===1&&(this.#o=et.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#t.onFocus())}),this.#r=w.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#t.onOnline())}))}unmount(){this.#n--,this.#n===0&&(this.#o?.(),this.#o=void 0,this.#r?.(),this.#r=void 0)}isFetching(t){return this.#t.findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return this.#e.findAll({...t,status:"pending"}).length}getQueryData(t){const e=this.defaultQueryOptions({queryKey:t});return this.#t.get(e.queryHash)?.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),s=this.#t.build(this,e),i=s.state.data;return i===void 0?this.fetchQuery(t):(t.revalidateIfStale&&s.isStaleByTime(O(e.staleTime,s))&&this.prefetchQuery(e),Promise.resolve(i))}getQueriesData(t){return this.#t.findAll(t).map(({queryKey:e,state:s})=>{const i=s.data;return[e,i]})}setQueryData(t,e,s){const i=this.defaultQueryOptions({queryKey:t}),n=this.#t.get(i.queryHash)?.state.data,h=st(e,n);if(h!==void 0)return this.#t.build(this,i).setData(h,{...s,manual:!0})}setQueriesData(t,e,s){return u.batch(()=>this.#t.findAll(t).map(({queryKey:i})=>[i,this.setQueryData(i,e,s)]))}getQueryState(t){const e=this.defaultQueryOptions({queryKey:t});return this.#t.get(e.queryHash)?.state}removeQueries(t){const e=this.#t;u.batch(()=>{e.findAll(t).forEach(s=>{e.remove(s)})})}resetQueries(t,e){const s=this.#t;return u.batch(()=>(s.findAll(t).forEach(i=>{i.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const s={revert:!0,...e},i=u.batch(()=>this.#t.findAll(t).map(a=>a.cancel(s)));return Promise.all(i).then(l).catch(l)}invalidateQueries(t,e={}){return u.batch(()=>(this.#t.findAll(t).forEach(s=>{s.invalidate()}),t?.refetchType==="none"?Promise.resolve():this.refetchQueries({...t,type:t?.refetchType??t?.type??"active"},e)))}refetchQueries(t,e={}){const s={...e,cancelRefetch:e.cancelRefetch??!0},i=u.batch(()=>this.#t.findAll(t).filter(a=>!a.isDisabled()&&!a.isStatic()).map(a=>{let n=a.fetch(void 0,s);return s.throwOnError||(n=n.catch(l)),a.state.fetchStatus==="paused"?Promise.resolve():n}));return Promise.all(i).then(l)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const s=this.#t.build(this,e);return s.isStaleByTime(O(e.staleTime,s))?s.fetch(e):Promise.resolve(s.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(l).catch(l)}fetchInfiniteQuery(t){return t.behavior=R(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(l).catch(l)}ensureInfiniteQueryData(t){return t.behavior=R(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return w.isOnline()?this.#e.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#t}getMutationCache(){return this.#e}getDefaultOptions(){return this.#s}setDefaultOptions(t){this.#s=t}setQueryDefaults(t,e){this.#a.set(A(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...this.#a.values()],s={};return e.forEach(i=>{D(t,i.queryKey)&&Object.assign(s,i.defaultOptions)}),s}setMutationDefaults(t,e){this.#i.set(A(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...this.#i.values()],s={};return e.forEach(i=>{D(t,i.mutationKey)&&Object.assign(s,i.defaultOptions)}),s}defaultQueryOptions(t){if(t._defaulted)return t;const e={...this.#s.queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=K(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===U&&(e.enabled=!1),e}defaultMutationOptions(t){return t?._defaulted?t:{...this.#s.mutations,...t?.mutationKey&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){this.#t.clear(),this.#e.clear()}};const lt=new ct({defaultOptions:{queries:{refetchOnWindowFocus:!1,retry:!1}}}),dt=({children:t})=>o.jsx(it,{client:lt,children:o.jsx(_,{children:t})});function mt({children:t}){return o.jsxs("html",{lang:"pt-BR",children:[o.jsxs("head",{children:[o.jsx("meta",{charSet:"UTF-8"}),o.jsx("link",{rel:"icon",type:"image/svg+xml",href:"/favicon.png"}),o.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0"}),o.jsx("title",{children:"NaMesaJá"}),o.jsx(B,{})]}),o.jsxs("body",{children:[o.jsx(dt,{children:t}),o.jsx(G,{}),o.jsx(N,{})]})]})}const gt=H(function(){return o.jsx(W,{})});export{mt as Layout,gt as default};
