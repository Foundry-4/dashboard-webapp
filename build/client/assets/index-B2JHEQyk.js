import{w as p,a as f,o as s}from"./chunk-QMGIS6GS-u2wsVBQ8.js";import{A as x}from"./AuthFooter-CKhZqaSr.js";import{C as h,a as g,b as P}from"./card-B9a7pVUc.js";import{u as j,a as b,E as A,c as C}from"./zod-CESMKTJV.js";import{F as t}from"./FormInput-DWnxTtgF.js";import{M as S}from"./MessageAlert-B1YPt43R.js";import{u as y}from"./AuthContext-DymqdCtb.js";import"./button-p6101m2e.js";import"./utils-CBfrqCZ4.js";import"./createLucideIcon-BaT0F7pg.js";import"./index-CcF3o-s6.js";import"./auth-DssmCHyn.js";const V=()=>[{title:"Alterar senha - NaMesaJá"}],z=p(function(){const{user:l,changePassword:c}=y(),[d,n]=f.useState(""),{register:a,handleSubmit:u,formState:{errors:e,isSubmitting:m},setError:i}=j({resolver:b(C),defaultValues:{currentPassword:"",newPassword:"",confirmPassword:""}}),w=async o=>{try{const r=await c({userGuid:l?.userGuid??"",currentPassword:o.currentPassword,newPassword:o.newPassword,confirmPassword:o.confirmPassword});if(!r.status){n(""),i("root",{type:"manual",message:r.message});return}n(r.message)}catch(r){console.error("Change password error:",r),i("root",{type:"manual",message:r instanceof Error?r.message:"Erro ao alterar senha."})}};return s.jsxs("div",{className:"w-full",children:[s.jsx(h,{children:s.jsx(g,{className:"text-center text-4xl",children:"Alterar senha"})}),s.jsx(P,{className:"flex flex-col gap-6",children:s.jsxs("form",{onSubmit:u(w),className:"flex flex-col gap-6",children:[s.jsx(t,{label:"Senha atual *",type:"password",error:e.currentPassword?.message,...a("currentPassword")}),s.jsx(t,{label:"Nova senha",type:"password",error:e.newPassword?.message,...a("newPassword")}),s.jsx(t,{label:"Confirmar nova senha",type:"password",error:e.confirmPassword?.message,...a("confirmPassword")}),s.jsx(A,{error:e.root?.message}),s.jsx(S,{message:d}),s.jsx(x,{question:"Não lembra sua senha atual?",linkText:"Solicitar nova senha",linkTo:"/forgot-password",buttonText:m?"Alterando...":"Alterar senha",disabled:m})]})})]})});export{z as default,V as meta};
